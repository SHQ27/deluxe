<?php

/**
 * invitacion
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    deluxebuys
 * @subpackage model
 * @author     Your name here
 * @version    SVN: $Id: Builder.php 7490 2010-03-29 19:53:27Z jwage $
 */
class invitacion extends Baseinvitacion
{
    /**
     * @return invitacion
     */
    static public function crear(usuario $usuario, $email)
    {
        $idUsuario = $usuario->getIdUsuario();
        $invitacionTable = invitacionTable::getInstance();
        $invitacion = $invitacionTable->findOneByUsuarioAndEmail($idUsuario, $email);
        if ($invitacion) {
            return $invitacion;
        }
        $invitacion = new self;
        return $invitacion->setIdUsuario($idUsuario)
            ->setFueEnviada(true)
            ->setHash()
            ->setEmailInvitado($email);        
    }
    /**
     * @return invitacion
     */
    public function setHash($hash = null)
    {
        $this->_set('hash', $hash ? $hash : md5(mt_rand()));
        return $this;
    }
    
    public function getValor()
    {
        return configuracionTable::getValor(configuracion::MONTO_INVITACION);        
    }
}
