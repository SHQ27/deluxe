CREATE TABLE banner (id_banner INT AUTO_INCREMENT, url VARCHAR(255) NOT NULL, posicion SMALLINT NOT NULL, orden SMALLINT NOT NULL, activo TINYINT(1) DEFAULT '0' NOT NULL, PRIMARY KEY(id_banner)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE bonificacion (id_bonificacion INT AUTO_INCREMENT, id_usuario INT NOT NULL, id_tipo_descuento CHAR(5) NOT NULL, id_tipo_bonificacion CHAR(5) NOT NULL, valor DECIMAL(12, 2), fue_utilizada TINYINT(1) DEFAULT '0', vencimiento DATE, es_interna TINYINT(1) DEFAULT '0', INDEX fk_bonificacion_tipo_descuento1_idx (id_tipo_descuento), INDEX fk_bonificacion_tipo_bonificacion1_idx (id_tipo_bonificacion), INDEX fk_bonificacion_usuario1_idx (id_usuario), PRIMARY KEY(id_bonificacion)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE campana (id_campana INT AUTO_INCREMENT, denominacion VARCHAR(255), descripcion MEDIUMTEXT, texto_promocion VARCHAR(255), fecha_inicio DATETIME, fecha_fin DATETIME, tiene_envio_gratis TINYINT(1), activo TINYINT(1), slug VARCHAR(255), INDEX campana_fecha_inicio_idx (fecha_inicio), INDEX campana_fecha_fin_idx (fecha_fin), UNIQUE INDEX campana_sluggable_idx (slug), PRIMARY KEY(id_campana)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE campana_marca (id_campana INT, id_marca INT, INDEX fk_campana_has_marca_marca1_idx (id_marca), INDEX fk_campana_has_marca_campana1_idx (id_campana), PRIMARY KEY(id_campana, id_marca)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE carrito_bonificacion (id_carrito_bonificacion INT AUTO_INCREMENT, id_bonificacion INT NOT NULL, id_session VARCHAR(100) NOT NULL, INDEX fk_carrito_bonificacion_bonificacion1_idx (id_bonificacion), INDEX fk_carrito_bonificacion_session1_idx (id_session), PRIMARY KEY(id_carrito_bonificacion)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE carrito_descuento (id_carrito_descuento INT AUTO_INCREMENT, id_descuento INT NOT NULL, id_session VARCHAR(100) NOT NULL, INDEX fk_carrito_descuento_descuento1_idx (id_descuento), INDEX fk_carrito_descuento_session1_idx (id_session), PRIMARY KEY(id_carrito_descuento)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE carrito_envio (id_carrito_envio INT AUTO_INCREMENT, id_session VARCHAR(100) NOT NULL, tipo CHAR(3), nombre VARCHAR(30), apellido VARCHAR(30), calle VARCHAR(30), numero VARCHAR(5), piso VARCHAR(6), depto VARCHAR(4), horario VARCHAR(50), codigo_postal VARCHAR(8), id_sucursal_oca INT, id_localidad INT, INDEX fk_carrito_envio_sucursal_oca1_idx (id_sucursal_oca), INDEX fk_carrito_envio_localidad1_idx (id_localidad), INDEX fk_carrito_envio_session1_idx (id_session), PRIMARY KEY(id_carrito_envio)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE carrito_look (id_carrito_look INT AUTO_INCREMENT, id_look INT NOT NULL, id_session VARCHAR(100) NOT NULL, INDEX fk_carrito_look_look1_idx (id_look), INDEX fk_carrito_look_session1_idx (id_session), PRIMARY KEY(id_carrito_look)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE carrito_look_producto_item (id_carrito_look INT, id_producto_item INT, INDEX fk_look_producto_item_carrito_look1_idx (id_carrito_look), INDEX fk_look_producto_item_producto_item1_idx (id_producto_item), PRIMARY KEY(id_carrito_look, id_producto_item)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE carrito_producto_item (id_carrito_producto_item INT AUTO_INCREMENT, id_producto_item INT NOT NULL, id_session VARCHAR(100) NOT NULL, cantidad INT NOT NULL, INDEX fk_carrito_producto_item2_idx (id_producto_item), INDEX fk_carrito_session1_idx (id_session), PRIMARY KEY(id_carrito_producto_item)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE configuracion (id_configuracion CHAR(5), denominacion VARCHAR(100), valor VARCHAR(255), PRIMARY KEY(id_configuracion)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE costo_envio (id_costo_envio INT AUTO_INCREMENT, id_zona INT NOT NULL, peso_desde DECIMAL(12, 2), peso_hasta DECIMAL(12, 2), valor_estandar DECIMAL(12, 2), valor_prioritario DECIMAL(12, 2), valor_sucursal DECIMAL(12, 2), INDEX fk_costo_envio_zona1_idx (id_zona), PRIMARY KEY(id_costo_envio)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE descuento (id_descuento INT AUTO_INCREMENT, codigo VARCHAR(50), id_tipo_descuento CHAR(5) NOT NULL, valor DECIMAL(12, 2), fecha_expiracion DATETIME, total INT, utilizados INT DEFAULT 0, INDEX fk_descuento_tipo_descuento1_idx (id_tipo_descuento), INDEX decuento_codigo_index_idx (codigo), PRIMARY KEY(id_descuento)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE direccion_envio (id_direccion_envio INT AUTO_INCREMENT, id_usuario INT NOT NULL, id_localidad INT NOT NULL, calle VARCHAR(30), numero VARCHAR(5), piso VARCHAR(6), depto VARCHAR(4), codigo_postal VARCHAR(8), horario VARCHAR(50), INDEX fk_direccion_envio_usuario1_idx (id_usuario), INDEX fk_direccion_envio_localidad1_idx (id_localidad), PRIMARY KEY(id_direccion_envio)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE forma_pago (id_forma_pago CHAR(5), denominacion VARCHAR(100), PRIMARY KEY(id_forma_pago)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE invitacion (id_invitacion INT AUTO_INCREMENT, id_usuario INT NOT NULL, email_invitado VARCHAR(100), hash CHAR(32), fue_enviada VARCHAR(45), fecha DATETIME NOT NULL, id_usuario_invitado INT, id_pedido_realizado INT, INDEX fk_invitacion_usuario1_idx (id_usuario), INDEX fk_invitacion_usuario2_idx (id_usuario_invitado), INDEX fk_invitacion_pedido1_idx (id_pedido_realizado), PRIMARY KEY(id_invitacion)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE localidad (id_localidad INT AUTO_INCREMENT, id_zona INT NOT NULL, id_provincia INT NOT NULL, denominacion VARCHAR(255), denominacion_oca VARCHAR(255), codigo_postal VARCHAR(10), dias_entrega_estandar INT, dias_entrega_prioritario INT, dias_entrega_sucursal INT, INDEX fk_localidad_zona1_idx (id_zona), INDEX fk_localidad_provincia2_idx (id_provincia), PRIMARY KEY(id_localidad)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE look (id_look INT AUTO_INCREMENT, denominacion VARCHAR(255), precio DECIMAL(12, 2), activo TINYINT(1), slug VARCHAR(255), UNIQUE INDEX look_sluggable_idx (slug), PRIMARY KEY(id_look)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE look_imagen (id_look_imagen INT AUTO_INCREMENT, id_look INT NOT NULL, orden SMALLINT, INDEX fk_look_imagen_look1_idx (id_look), PRIMARY KEY(id_look_imagen)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE look_producto (id_look INT, id_producto INT, INDEX fk_look_has_producto_look1_idx (id_look), INDEX fk_look_has_producto_producto1_idx (id_producto), PRIMARY KEY(id_look, id_producto)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE look_tag (id_look INT, id_tag INT, INDEX fk_look_has_tag_tag1_idx (id_tag), INDEX fk_look_has_tag_look1_idx (id_look), PRIMARY KEY(id_look, id_tag)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE marca (id_marca INT AUTO_INCREMENT, nombre VARCHAR(255), backstage_url VARCHAR(255), guia_talles MEDIUMTEXT, slug VARCHAR(255), UNIQUE INDEX marca_sluggable_idx (slug), PRIMARY KEY(id_marca)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE newsletter (id_newsletter INT AUTO_INCREMENT, email VARCHAR(100) NOT NULL, sexo CHAR(1) NOT NULL, UNIQUE INDEX unique_row_idx (email ASC, sexo ASC), PRIMARY KEY(id_newsletter)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE pago_notificacion (id_pago_notificacion INT AUTO_INCREMENT, fecha DATETIME NOT NULL, metodo VARCHAR(20), id_pedido INT, response MEDIUMTEXT, procesado TINYINT(1) DEFAULT '0', mensaje MEDIUMTEXT, INDEX fk_pago_notificacion_pedido1_idx (id_pedido), PRIMARY KEY(id_pago_notificacion)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE pais (id_pais CHAR(2), nombre VARCHAR(255), PRIMARY KEY(id_pais)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE pedido (id_pedido INT AUTO_INCREMENT, id_usuario INT NOT NULL, fecha_alta DATETIME NOT NULL, fecha_baja DATETIME, fecha_pago DATETIME, fecha_aviso_pago DATETIME, fecha_envio DATETIME, fecha_facturacion DATETIME, fecha_ultima_comprobacion DATETIME, nombre VARCHAR(30), apellido VARCHAR(30), email VARCHAR(100), telefono VARCHAR(30), celular VARCHAR(30), observaciones MEDIUMTEXT, id_forma_pago CHAR(5), envio_codigo VARCHAR(50), envio_tipo CHAR(3), envio_nombre VARCHAR(30), envio_apellido VARCHAR(30), envio_calle VARCHAR(30), envio_numero VARCHAR(5), envio_piso VARCHAR(6), envio_depto VARCHAR(4), envio_codigo_postal VARCHAR(10), envio_horario VARCHAR(50), envio_id_sucursal_oca INT, envio_id_localidad INT, monto_envio DECIMAL(12, 2), monto_productos DECIMAL(12, 2), monto_bonificacion DECIMAL(12, 2), monto_descuento DECIMAL(12, 2), monto_total DECIMAL(12, 2), cuotas INT, interes DECIMAL(12, 2), datos_pago MEDIUMTEXT, codigo_envio VARCHAR(100), nota MEDIUMTEXT, INDEX fk_pedido_usuario1_idx (id_usuario), INDEX fk_pedido_forma_pago1_idx (id_forma_pago), INDEX fk_pedido_localidad1_idx (envio_id_localidad), INDEX fk_pedido_sucursal_oca1_idx (envio_id_sucursal_oca), PRIMARY KEY(id_pedido)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE pedido_bonificacion (id_pedido_bonificacion INT AUTO_INCREMENT, id_bonificacion INT NOT NULL, id_pedido INT NOT NULL, id_tipo_descuento CHAR(5) NOT NULL, valor DECIMAL(12, 2), monto DECIMAL(12, 2), INDEX fk_pedido_bonificacion_bonificacion1_idx (id_bonificacion), INDEX fk_pedido_bonificacion_tipo_descuento1_idx (id_tipo_descuento), INDEX fk_pedido_bonificacion_pedido1_idx (id_pedido), PRIMARY KEY(id_pedido_bonificacion)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE pedido_descuento (id_pedido_descuento INT AUTO_INCREMENT, id_descuento INT NOT NULL, id_pedido INT NOT NULL, id_tipo_descuento CHAR(5) NOT NULL, valor DECIMAL(12, 2), monto DECIMAL(12, 2), INDEX fk_pedido_descuento_pedido1_idx (id_pedido), INDEX fk_pedido_descuento_descuento1_idx (id_descuento), INDEX fk_pedido_descuento_tipo_descuento1_idx (id_tipo_descuento), PRIMARY KEY(id_pedido_descuento)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE pedido_producto_item (id_pedido_producto_item INT AUTO_INCREMENT, id_producto_item INT NOT NULL, id_pedido INT NOT NULL, cantidad INT, precio_lista DECIMAL(12, 2), precio_deluxe DECIMAL(12, 2), costo DECIMAL(12, 2), id_producto_talle INT NOT NULL, id_producto_color INT NOT NULL, INDEX fk_pedido_producto_item_producto_item1_idx (id_producto_item), INDEX fk_pedido_producto_item_pedido1_idx (id_pedido), INDEX fk_pedido_producto_item_producto_talle1_idx (id_producto_talle), INDEX fk_pedido_producto_item_producto_color1_idx (id_producto_color), PRIMARY KEY(id_pedido_producto_item)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE pedido_producto_item_campana (id_pedido_producto_item_campana INT AUTO_INCREMENT, id_pedido_producto_item INT NOT NULL, id_campana INT NOT NULL, INDEX fk_pedido_producto_item_campana_pedido_producto_item1_idx (id_pedido_producto_item), INDEX fk_pedido_producto_item_campana_campana1_idx (id_campana), PRIMARY KEY(id_pedido_producto_item_campana)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE post (id_post INT AUTO_INCREMENT, titulo VARCHAR(255), id_post_categoria INT NOT NULL, fecha DATETIME NOT NULL, cuerpo MEDIUMTEXT, slug VARCHAR(255), INDEX fk_post_post_categoria1_idx (id_post_categoria), UNIQUE INDEX post_sluggable_idx (slug), PRIMARY KEY(id_post)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE post_categoria (id_post_categoria INT AUTO_INCREMENT, denominacion VARCHAR(255), slug VARCHAR(255), UNIQUE INDEX post_categoria_sluggable_idx (slug), PRIMARY KEY(id_post_categoria)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE post_comentario (id_post_comentario INT AUTO_INCREMENT, id_post INT NOT NULL, nombre VARCHAR(100), email VARCHAR(100), comentario MEDIUMTEXT, fecha DATETIME NOT NULL, aprobado TINYINT(1) DEFAULT '1', updated_at DATETIME NOT NULL, INDEX fk_post_comentario_post1_idx (id_post), PRIMARY KEY(id_post_comentario)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE producto (id_producto INT AUTO_INCREMENT, codigo VARCHAR(30), denominacion VARCHAR(255), descripcion MEDIUMTEXT, info_adicional MEDIUMTEXT, id_marca INT NOT NULL, id_producto_categoria INT NOT NULL, fecha_modificacion DATETIME, precio_lista DECIMAL(12, 2), mostrar_precio_lista TINYINT(1) DEFAULT '1', precio_deluxe DECIMAL(12, 2), costo DECIMAL(12, 2), peso DECIMAL(12, 2), destacar TINYINT(1) DEFAULT '0', vendidos INT DEFAULT 0, visitas INT DEFAULT 0, activo TINYINT(1), INDEX fk_producto_marca1_idx (id_marca), INDEX fk_producto_producto_categoria1_idx (id_producto_categoria), INDEX ix_producto_precio_deluxe_idx (precio_deluxe), INDEX ix_producto_visitas_idx (visitas), INDEX ix_producto_vendidos_idx (vendidos), PRIMARY KEY(id_producto)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE producto_campana (id_producto INT, id_campana INT, INDEX fk_producto_has_campana_producto1_idx (id_producto), INDEX fk_producto_has_campana_campana1_idx (id_campana), PRIMARY KEY(id_producto, id_campana)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE producto_categoria (id_producto_categoria INT AUTO_INCREMENT, denominacion VARCHAR(255), id_producto_genero CHAR(5) NOT NULL, slug VARCHAR(255), INDEX fk_categoria_producto_genero1_idx (id_producto_genero), PRIMARY KEY(id_producto_categoria)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE producto_color (id_producto_color INT AUTO_INCREMENT, denominacion VARCHAR(100), PRIMARY KEY(id_producto_color)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE producto_genero (id_producto_genero CHAR(5), denominacion VARCHAR(255), slug VARCHAR(255), UNIQUE INDEX producto_genero_sluggable_idx (slug), PRIMARY KEY(id_producto_genero)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE producto_imagen (id_producto_imagen INT AUTO_INCREMENT, id_producto INT NOT NULL, orden SMALLINT, INDEX fk_producto_imagen_producto1_idx (id_producto), PRIMARY KEY(id_producto_imagen)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE producto_item (id_producto_item INT AUTO_INCREMENT, id_producto INT NOT NULL, id_producto_talle INT NOT NULL, id_producto_color INT NOT NULL, stock INT, INDEX fk_producto_item_producto1_idx (id_producto), INDEX fk_producto_item_producto_tamano1_idx (id_producto_talle), INDEX fk_producto_item_producto_color1_idx (id_producto_color), INDEX FK_producto_item_talle_color_idx (id_producto_talle, id_producto_color, id_producto), PRIMARY KEY(id_producto_item)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE producto_tag (id_producto INT, id_tag INT, INDEX fk_tag_has_producto_tag1_idx (id_tag), INDEX fk_tag_has_producto_producto1_idx (id_producto), PRIMARY KEY(id_producto, id_tag)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE producto_talle (id_producto_talle INT AUTO_INCREMENT, denominacion VARCHAR(100), orden TINYINT, PRIMARY KEY(id_producto_talle)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE provincia (id_provincia INT AUTO_INCREMENT, id_pais CHAR(2) NOT NULL, nombre VARCHAR(255), INDEX fk_provincia_pais1_idx (id_pais), PRIMARY KEY(id_provincia)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE session (id_session VARCHAR(100), fecha_ultima_accion DATETIME NOT NULL, PRIMARY KEY(id_session)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE session_storage (id_session VARCHAR(255), session_data LONGTEXT NOT NULL, session_time BIGINT NOT NULL, PRIMARY KEY(id_session)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE session_storage_backend (id_session VARCHAR(255), session_data LONGTEXT NOT NULL, session_time BIGINT NOT NULL, PRIMARY KEY(id_session)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE session_storage_frontend (id_session VARCHAR(255), session_data LONGTEXT NOT NULL, session_time BIGINT NOT NULL, PRIMARY KEY(id_session)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE sf_guard_forgot_password (id BIGINT AUTO_INCREMENT, user_id BIGINT NOT NULL, unique_key VARCHAR(255), expires_at DATETIME NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_group (id BIGINT AUTO_INCREMENT, name VARCHAR(255) UNIQUE, description TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_group_permission (group_id BIGINT, permission_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(group_id, permission_id)) ENGINE = INNODB;
CREATE TABLE sf_guard_permission (id BIGINT AUTO_INCREMENT, name VARCHAR(255) UNIQUE, description TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_remember_key (id BIGINT AUTO_INCREMENT, user_id BIGINT, remember_key VARCHAR(32), ip_address VARCHAR(50), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_user (id BIGINT AUTO_INCREMENT, first_name VARCHAR(255), last_name VARCHAR(255), email_address VARCHAR(255) NOT NULL UNIQUE, username VARCHAR(128) NOT NULL UNIQUE, algorithm VARCHAR(128) DEFAULT 'sha1' NOT NULL, salt VARCHAR(128), password VARCHAR(128), is_active TINYINT(1) DEFAULT '1', is_super_admin TINYINT(1) DEFAULT '0', last_login DATETIME, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX is_active_idx_idx (is_active), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_user_group (user_id BIGINT, group_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(user_id, group_id)) ENGINE = INNODB;
CREATE TABLE sf_guard_user_permission (user_id BIGINT, permission_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(user_id, permission_id)) ENGINE = INNODB;
CREATE TABLE sucursal_oca (id_sucursal_oca INT AUTO_INCREMENT, id_localidad INT NOT NULL, nombre VARCHAR(255), codigo CHAR(3), direccion VARCHAR(255), codigo_postal VARCHAR(10), telefono VARCHAR(50), horario_lu_vie VARCHAR(50), horario_sab VARCHAR(50), INDEX fk_sucursal_oca_localidad1_idx (id_localidad), PRIMARY KEY(id_sucursal_oca)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE tag (id_tag INT AUTO_INCREMENT, denominacion VARCHAR(100) UNIQUE, PRIMARY KEY(id_tag)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE tipo_bonificacion (id_tipo_bonificacion CHAR(5), denominacion VARCHAR(100), PRIMARY KEY(id_tipo_bonificacion)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE tipo_descuento (id_tipo_descuento CHAR(5), denominacion VARCHAR(100), formato VARCHAR(100), PRIMARY KEY(id_tipo_descuento)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE usuario (id_usuario INT AUTO_INCREMENT, nombre VARCHAR(30) NOT NULL, apellido VARCHAR(30) NOT NULL, sexo CHAR(1), email VARCHAR(100) UNIQUE, password CHAR(32), telefono VARCHAR(30) NOT NULL, celular VARCHAR(30), id_pais CHAR(2) NOT NULL, fecha_nacimiento DATE NOT NULL, activo TINYINT(1), fecha_alta DATETIME NOT NULL, fecha_confirmacion VARCHAR(45), fecha_baja VARCHAR(45), INDEX fk_usuario_pais1_idx (id_pais), PRIMARY KEY(id_usuario)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE zona (id_zona INT AUTO_INCREMENT, denominacion VARCHAR(100), PRIMARY KEY(id_zona)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE bonificacion ADD CONSTRAINT bonificacion_id_usuario_usuario_id_usuario FOREIGN KEY (id_usuario) REFERENCES usuario(id_usuario);
ALTER TABLE bonificacion ADD CONSTRAINT bonificacion_id_tipo_descuento_tipo_descuento_id_tipo_descuento FOREIGN KEY (id_tipo_descuento) REFERENCES tipo_descuento(id_tipo_descuento);
ALTER TABLE bonificacion ADD CONSTRAINT biti FOREIGN KEY (id_tipo_bonificacion) REFERENCES tipo_bonificacion(id_tipo_bonificacion);
ALTER TABLE campana_marca ADD CONSTRAINT campana_marca_id_marca_marca_id_marca FOREIGN KEY (id_marca) REFERENCES marca(id_marca);
ALTER TABLE campana_marca ADD CONSTRAINT campana_marca_id_campana_campana_id_campana FOREIGN KEY (id_campana) REFERENCES campana(id_campana);
ALTER TABLE carrito_bonificacion ADD CONSTRAINT cibi FOREIGN KEY (id_bonificacion) REFERENCES bonificacion(id_bonificacion);
ALTER TABLE carrito_bonificacion ADD CONSTRAINT carrito_bonificacion_id_session_session_id_session FOREIGN KEY (id_session) REFERENCES session(id_session);
ALTER TABLE carrito_descuento ADD CONSTRAINT carrito_descuento_id_session_session_id_session FOREIGN KEY (id_session) REFERENCES session(id_session);
ALTER TABLE carrito_descuento ADD CONSTRAINT carrito_descuento_id_descuento_descuento_id_descuento FOREIGN KEY (id_descuento) REFERENCES descuento(id_descuento);
ALTER TABLE carrito_envio ADD CONSTRAINT carrito_envio_id_sucursal_oca_sucursal_oca_id_sucursal_oca FOREIGN KEY (id_sucursal_oca) REFERENCES sucursal_oca(id_sucursal_oca);
ALTER TABLE carrito_envio ADD CONSTRAINT carrito_envio_id_session_session_id_session FOREIGN KEY (id_session) REFERENCES session(id_session);
ALTER TABLE carrito_envio ADD CONSTRAINT carrito_envio_id_localidad_localidad_id_localidad FOREIGN KEY (id_localidad) REFERENCES localidad(id_localidad);
ALTER TABLE carrito_look ADD CONSTRAINT carrito_look_id_session_session_id_session FOREIGN KEY (id_session) REFERENCES session(id_session);
ALTER TABLE carrito_look ADD CONSTRAINT carrito_look_id_look_look_id_look FOREIGN KEY (id_look) REFERENCES look(id_look);
ALTER TABLE carrito_look_producto_item ADD CONSTRAINT cipi FOREIGN KEY (id_producto_item) REFERENCES producto_item(id_producto_item);
ALTER TABLE carrito_look_producto_item ADD CONSTRAINT cici_1 FOREIGN KEY (id_carrito_look) REFERENCES carrito_look(id_carrito_look);
ALTER TABLE carrito_producto_item ADD CONSTRAINT cipi_1 FOREIGN KEY (id_producto_item) REFERENCES producto_item(id_producto_item);
ALTER TABLE carrito_producto_item ADD CONSTRAINT carrito_producto_item_id_session_session_id_session FOREIGN KEY (id_session) REFERENCES session(id_session);
ALTER TABLE costo_envio ADD CONSTRAINT costo_envio_id_zona_zona_id_zona FOREIGN KEY (id_zona) REFERENCES zona(id_zona);
ALTER TABLE descuento ADD CONSTRAINT descuento_id_tipo_descuento_tipo_descuento_id_tipo_descuento FOREIGN KEY (id_tipo_descuento) REFERENCES tipo_descuento(id_tipo_descuento);
ALTER TABLE direccion_envio ADD CONSTRAINT direccion_envio_id_usuario_usuario_id_usuario FOREIGN KEY (id_usuario) REFERENCES usuario(id_usuario);
ALTER TABLE direccion_envio ADD CONSTRAINT direccion_envio_id_localidad_localidad_id_localidad FOREIGN KEY (id_localidad) REFERENCES localidad(id_localidad);
ALTER TABLE invitacion ADD CONSTRAINT invitacion_id_usuario_usuario_id_usuario FOREIGN KEY (id_usuario) REFERENCES usuario(id_usuario);
ALTER TABLE invitacion ADD CONSTRAINT invitacion_id_usuario_invitado_usuario_id_usuario FOREIGN KEY (id_usuario_invitado) REFERENCES usuario(id_usuario);
ALTER TABLE invitacion ADD CONSTRAINT invitacion_id_pedido_realizado_pedido_id_pedido FOREIGN KEY (id_pedido_realizado) REFERENCES pedido(id_pedido);
ALTER TABLE localidad ADD CONSTRAINT localidad_id_zona_zona_id_zona FOREIGN KEY (id_zona) REFERENCES zona(id_zona);
ALTER TABLE localidad ADD CONSTRAINT localidad_id_provincia_provincia_id_provincia FOREIGN KEY (id_provincia) REFERENCES provincia(id_provincia);
ALTER TABLE look_imagen ADD CONSTRAINT look_imagen_id_look_look_id_look FOREIGN KEY (id_look) REFERENCES look(id_look);
ALTER TABLE look_producto ADD CONSTRAINT look_producto_id_producto_producto_id_producto FOREIGN KEY (id_producto) REFERENCES producto(id_producto);
ALTER TABLE look_producto ADD CONSTRAINT look_producto_id_look_look_id_look FOREIGN KEY (id_look) REFERENCES look(id_look);
ALTER TABLE look_tag ADD CONSTRAINT look_tag_id_tag_tag_id_tag FOREIGN KEY (id_tag) REFERENCES tag(id_tag);
ALTER TABLE look_tag ADD CONSTRAINT look_tag_id_look_look_id_look FOREIGN KEY (id_look) REFERENCES look(id_look);
ALTER TABLE pago_notificacion ADD CONSTRAINT pago_notificacion_id_pedido_pedido_id_pedido FOREIGN KEY (id_pedido) REFERENCES pedido(id_pedido);
ALTER TABLE pedido ADD CONSTRAINT pedido_id_usuario_usuario_id_usuario FOREIGN KEY (id_usuario) REFERENCES usuario(id_usuario);
ALTER TABLE pedido ADD CONSTRAINT pedido_id_forma_pago_forma_pago_id_forma_pago FOREIGN KEY (id_forma_pago) REFERENCES forma_pago(id_forma_pago);
ALTER TABLE pedido ADD CONSTRAINT pedido_envio_id_sucursal_oca_sucursal_oca_id_sucursal_oca FOREIGN KEY (envio_id_sucursal_oca) REFERENCES sucursal_oca(id_sucursal_oca);
ALTER TABLE pedido ADD CONSTRAINT pedido_envio_id_localidad_localidad_id_localidad FOREIGN KEY (envio_id_localidad) REFERENCES localidad(id_localidad);
ALTER TABLE pedido_bonificacion ADD CONSTRAINT piti FOREIGN KEY (id_tipo_descuento) REFERENCES tipo_descuento(id_tipo_descuento);
ALTER TABLE pedido_bonificacion ADD CONSTRAINT pedido_bonificacion_id_pedido_pedido_id_pedido FOREIGN KEY (id_pedido) REFERENCES pedido(id_pedido);
ALTER TABLE pedido_bonificacion ADD CONSTRAINT pedido_bonificacion_id_bonificacion_bonificacion_id_bonificacion FOREIGN KEY (id_bonificacion) REFERENCES bonificacion(id_bonificacion);
ALTER TABLE pedido_descuento ADD CONSTRAINT piti_1 FOREIGN KEY (id_tipo_descuento) REFERENCES tipo_descuento(id_tipo_descuento);
ALTER TABLE pedido_descuento ADD CONSTRAINT pedido_descuento_id_pedido_pedido_id_pedido FOREIGN KEY (id_pedido) REFERENCES pedido(id_pedido);
ALTER TABLE pedido_descuento ADD CONSTRAINT pedido_descuento_id_descuento_descuento_id_descuento FOREIGN KEY (id_descuento) REFERENCES descuento(id_descuento);
ALTER TABLE pedido_producto_item ADD CONSTRAINT pipi_2 FOREIGN KEY (id_producto_color) REFERENCES producto_color(id_producto_color);
ALTER TABLE pedido_producto_item ADD CONSTRAINT pipi_1 FOREIGN KEY (id_producto_talle) REFERENCES producto_talle(id_producto_talle);
ALTER TABLE pedido_producto_item ADD CONSTRAINT pipi FOREIGN KEY (id_producto_item) REFERENCES producto_item(id_producto_item);
ALTER TABLE pedido_producto_item ADD CONSTRAINT pedido_producto_item_id_pedido_pedido_id_pedido FOREIGN KEY (id_pedido) REFERENCES pedido(id_pedido);
ALTER TABLE pedido_producto_item_campana ADD CONSTRAINT pipi_4 FOREIGN KEY (id_pedido_producto_item) REFERENCES pedido_producto_item(id_pedido_producto_item);
ALTER TABLE pedido_producto_item_campana ADD CONSTRAINT pedido_producto_item_campana_id_campana_campana_id_campana FOREIGN KEY (id_campana) REFERENCES campana(id_campana);
ALTER TABLE post ADD CONSTRAINT post_id_post_categoria_post_categoria_id_post_categoria FOREIGN KEY (id_post_categoria) REFERENCES post_categoria(id_post_categoria);
ALTER TABLE post_comentario ADD CONSTRAINT post_comentario_id_post_post_id_post FOREIGN KEY (id_post) REFERENCES post(id_post);
ALTER TABLE producto ADD CONSTRAINT producto_id_marca_marca_id_marca FOREIGN KEY (id_marca) REFERENCES marca(id_marca);
ALTER TABLE producto ADD CONSTRAINT pipi_5 FOREIGN KEY (id_producto_categoria) REFERENCES producto_categoria(id_producto_categoria);
ALTER TABLE producto_campana ADD CONSTRAINT producto_campana_id_producto_producto_id_producto FOREIGN KEY (id_producto) REFERENCES producto(id_producto);
ALTER TABLE producto_campana ADD CONSTRAINT producto_campana_id_campana_campana_id_campana FOREIGN KEY (id_campana) REFERENCES campana(id_campana);
ALTER TABLE producto_categoria ADD CONSTRAINT pipi_6 FOREIGN KEY (id_producto_genero) REFERENCES producto_genero(id_producto_genero);
ALTER TABLE producto_imagen ADD CONSTRAINT producto_imagen_id_producto_producto_id_producto FOREIGN KEY (id_producto) REFERENCES producto(id_producto);
ALTER TABLE producto_item ADD CONSTRAINT producto_item_id_producto_talle_producto_talle_id_producto_talle FOREIGN KEY (id_producto_talle) REFERENCES producto_talle(id_producto_talle);
ALTER TABLE producto_item ADD CONSTRAINT producto_item_id_producto_producto_id_producto FOREIGN KEY (id_producto) REFERENCES producto(id_producto);
ALTER TABLE producto_item ADD CONSTRAINT producto_item_id_producto_color_producto_color_id_producto_color FOREIGN KEY (id_producto_color) REFERENCES producto_color(id_producto_color);
ALTER TABLE producto_tag ADD CONSTRAINT producto_tag_id_tag_tag_id_tag FOREIGN KEY (id_tag) REFERENCES tag(id_tag);
ALTER TABLE producto_tag ADD CONSTRAINT producto_tag_id_producto_producto_id_producto FOREIGN KEY (id_producto) REFERENCES producto(id_producto);
ALTER TABLE provincia ADD CONSTRAINT provincia_id_pais_pais_id_pais FOREIGN KEY (id_pais) REFERENCES pais(id_pais);
ALTER TABLE sf_guard_forgot_password ADD CONSTRAINT sf_guard_forgot_password_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_permission_id_sf_guard_permission_id FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_group_id_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_remember_key ADD CONSTRAINT sf_guard_remember_key_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_group_id_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_permission_id_sf_guard_permission_id FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE;
ALTER TABLE sucursal_oca ADD CONSTRAINT sucursal_oca_id_localidad_localidad_id_localidad FOREIGN KEY (id_localidad) REFERENCES localidad(id_localidad);
ALTER TABLE usuario ADD CONSTRAINT usuario_id_pais_pais_id_pais FOREIGN KEY (id_pais) REFERENCES pais(id_pais);
