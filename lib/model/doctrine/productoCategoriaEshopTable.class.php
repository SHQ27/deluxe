<?php

/**
 * productoCategoriaEshopTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class productoCategoriaEshopTable extends Doctrine_Table
{
    /**
     * Returns an instance of this class.
     *
     * @return object productoCategoriaEshopTable
     */
    public static function getInstance()
    {
        return Doctrine_Core::getTable('productoCategoriaEshop');
    }

	/**
	* Elimina todas posiciones ordenables de categorias para un eShop en particular
	* 
	* @param integer $idEshop
	* 
	*/
	public function deleteByIdEshop( $idEshop )
	{
		$this->createQuery('pce')
			 ->delete()
		     ->addWhere('pce.id_eshop= ?', array( $idEshop ) )
		     ->execute();
	}    

	/**
	* Retorna el productoCategoriaEshop que coincide con la clave compuesta
	* 
	* @param integer $idEshop
	* @param integer $idProductoCategoria
	* 
	* @return productoCategoriaEshop
	*/
	public function getByCompoundKey( $idEshop, $idProductoCategoria )
	{
		$query =  $this->createQuery('pce')
    			       ->addWhere('pce.id_producto_categoria = ?', $idProductoCategoria )
    			       ->addWhere('pce.id_eshop = ?', $idEshop );

		$query->useResultCache(true, null, 'productoCategoriaEshop_getByCompoundKey_' . $idEshop . '_' . $idProductoCategoria );
		
		return $query->fetchOne();
	}

}