<?php
/**
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class Version387 extends Doctrine_Migration_Base
{
    public function up()
    {
        $q = Doctrine_Manager::getInstance()->getCurrentConnection();
        $q->execute("DELETE FROM fallado;");
        
        $arr = array();
        
        $arr[11]=1;
        $arr[75]=1;
        $arr[122]=2;
        $arr[126]=1;
        $arr[257]=7;
        $arr[259]=3;
        $arr[355]=1;
        $arr[514]=1;
        $arr[607]=1;
        $arr[1240]=1;
        $arr[1629]=1;
        $arr[2563]=1;
        $arr[2956]=1;
        $arr[2968]=2;
        $arr[4125]=1;
        $arr[4157]=1;
        $arr[4165]=1;
        $arr[4659]=2;
        $arr[4677]=1;
        $arr[4843]=1;
        $arr[4987]=2;
        $arr[4989]=2;
        $arr[5164]=1;
        $arr[5359]=1;
        $arr[5639]=1;
        $arr[5640]=1;
        $arr[6052]=1;
        $arr[6178]=1;
        $arr[6210]=1;
        $arr[6222]=1;
        $arr[6229]=1;
        $arr[6259]=1;
        $arr[6408]=1;
        $arr[6973]=1;
        $arr[7895]=1;
        $arr[7976]=1;
        $arr[7980]=1;
        $arr[7983]=1;
        $arr[7990]=1;
        $arr[8132]=1;
        $arr[8450]=1;
        $arr[8458]=1;
        $arr[8459]=1;
        $arr[8541]=1;
        $arr[8687]=1;
        $arr[8702]=1;
        $arr[8756]=1;
        $arr[9067]=1;
        $arr[9077]=2;
        $arr[9089]=3;
        $arr[9090]=3;
        $arr[9141]=1;
        $arr[9152]=1;
        $arr[9740]=1;
        $arr[9862]=2;
        $arr[9864]=1;
        $arr[10482]=1;
        $arr[10672]=1;
        $arr[10775]=1;
        $arr[10845]=1;
        $arr[11571]=1;
        $arr[11745]=1;
        $arr[11754]=2;
        $arr[11799]=1;
        $arr[11981]=1;
        $arr[12368]=4;
        $arr[12651]=1;
        $arr[12659]=1;
        $arr[12915]=1;
        $arr[13089]=1;
        $arr[13121]=1;
        $arr[13126]=1;
        $arr[13128]=1;
        $arr[13145]=2;
        $arr[13148]=2;
        $arr[13205]=1;
        $arr[13517]=1;
        $arr[13855]=1;
        $arr[13891]=1;
        $arr[13917]=1;
        $arr[13997]=2;
        $arr[14010]=1;
        $arr[14467]=1;
        $arr[14473]=1;
        $arr[14535]=1;
        $arr[14570]=1;
        $arr[14716]=1;
        $arr[15194]=1;
        $arr[15218]=1;
        $arr[15245]=1;
        $arr[15286]=1;
        $arr[15339]=1;
        $arr[15438]=1;
        $arr[15439]=1;
        $arr[15441]=1;
        $arr[15725]=1;
        $arr[15774]=1;
        $arr[15805]=1;
        $arr[15820]=1;
        $arr[16032]=1;
        $arr[16687]=1;
        $arr[16727]=1;
        $arr[16762]=1;
        $arr[17003]=2;
        $arr[17113]=1;
        $arr[17124]=1;
        $arr[17176]=2;
        $arr[17180]=1;
        $arr[17231]=1;
        $arr[17393]=1;
        $arr[17397]=1;
        $arr[17503]=2;
        $arr[17579]=1;
        $arr[17603]=1;
        $arr[17695]=2;
        $arr[17800]=1;
        $arr[18188]=1;
        $arr[18355]=1;
        $arr[18483]=1;
        $arr[18866]=1;
        $arr[18970]=1;
        $arr[18979]=1;
        $arr[18999]=1;
        $arr[19043]=1;
        $arr[19407]=1;
        $arr[19419]=1;
        $arr[19625]=1;
        $arr[20238]=2;
        $arr[20245]=1;
        $arr[20351]=1;
        $arr[20492]=1;
        $arr[20525]=1;
        $arr[20526]=1;
        $arr[20536]=1;
        $arr[20552]=1;
        $arr[20554]=1;
        $arr[20568]=1;
        $arr[20601]=1;
        $arr[20686]=1;
        $arr[20704]=1;
        $arr[21173]=1;
        $arr[21306]=1;
        $arr[21307]=1;
        $arr[21591]=1;
        $arr[21757]=1;
        $arr[22208]=1;
        $arr[22209]=2;
        $arr[22210]=2;
        $arr[22212]=2;
        $arr[22226]=4;
        $arr[22378]=1;
        $arr[22384]=1;
        $arr[22470]=1;
        $arr[22479]=2;
        $arr[22492]=1;
        $arr[22557]=1;
        $arr[22768]=1;
        $arr[22956]=1;
        $arr[23005]=1;
        $arr[23266]=3;
        $arr[23372]=1;
        $arr[23490]=1;
        $arr[23686]=2;
        $arr[23704]=1;
        $arr[23964]=1;
        $arr[23982]=1;
        $arr[24172]=1;
        $arr[24358]=1;
        $arr[24437]=1;
        $arr[24480]=1;
        $arr[24482]=17;
        $arr[24619]=1;
        $arr[24774]=1;
        $arr[24967]=2;
        $arr[25367]=1;
        $arr[25563]=1;
        $arr[25566]=1;
        $arr[25593]=1;
        $arr[25595]=1;
        $arr[25767]=1;
        $arr[25768]=1;
        $arr[25812]=1;
        $arr[26347]=1;
        $arr[26360]=1;
        $arr[26719]=1;
        $arr[26968]=2;
        $arr[27046]=1;
        $arr[27658]=1;
        $arr[27698]=1;
        $arr[27716]=1;
        $arr[27787]=1;
        $arr[27801]=2;
        $arr[28171]=1;
        $arr[28357]=1;
        $arr[28503]=8;
        $arr[28548]=1;
        $arr[28570]=1;
        $arr[28572]=1;
        $arr[29036]=1;
        $arr[29045]=1;
        $arr[29228]=1;
        $arr[29240]=1;
        $arr[29313]=2;
        $arr[29358]=1;
        $arr[29711]=1;
        $arr[30125]=1;
        $arr[30341]=1;
        $arr[30767]=1;
        $arr[30820]=1;
        $arr[30824]=2;
        $arr[30899]=1;
        $arr[30943]=1;
        $arr[31100]=1;
        $arr[31131]=1;
        $arr[31146]=1;
        $arr[31162]=2;
        $arr[31254]=1;
        $arr[31373]=1;
        $arr[31421]=1;
        $arr[31426]=1;
        $arr[31436]=1;
        $arr[31503]=1;
        $arr[31816]=1;
        $arr[31938]=1;
        $arr[32065]=1;
        $arr[32080]=1;
        $arr[32092]=1;
        $arr[32093]=1;
        $arr[32102]=1;
        $arr[32124]=1;
        $arr[32174]=1;
        $arr[32273]=1;
        $arr[32699]=1;
        $arr[32705]=1;
        $arr[32706]=1;
        $arr[32711]=1;
        $arr[32807]=1;
        $arr[32829]=1;
        $arr[32863]=1;
        $arr[32883]=1;
        $arr[32968]=1;
        $arr[33421]=1;
        $arr[33446]=1;
        $arr[34140]=1;
        $arr[34256]=1;
        $arr[35115]=1;
        $arr[35712]=1;
        $arr[35719]=2;
        
        $pedido = new pedido();
        
        
        $pedido->setIdUsuario(206);
        $pedido->setFechaAlta( new Doctrine_Expression('now()') );
        $pedido->setFechaBaja( new Doctrine_Expression('now()') );
        $pedido->setNombre('Horacio Alberto');
        $pedido->setApellido('Sarda');
        $pedido->setEmail('horacitoesteves@hotmail.com');
        $pedido->setTelefono('156 4697344');
        $pedido->setIdFormaPago('MPAGO');
        
        $pedido->setEnvioTipo('OCA');
        $pedido->setEnvioNombre('Horacio Alberto');
        $pedido->setEnvioApellido('Sarda');
        $pedido->setEnvioCodigoPostal('1000');
        $pedido->setEnvioIdSucursalOca(9);
        $pedido->setEnvioIdLocalidad(16);
        $pedido->setMontoEnvio(0);
        $pedido->setMontoProductos(0);
        $pedido->setMontoBonificacion(0);
        $pedido->setMontoDescuento(0);
        $pedido->setMontoTotal(0);
        $pedido->setCuotas(0);
        $pedido->save();
        
        foreach ($arr as $idProducto => $cantidad)
        {
            $producto = productoTable::getInstance()->getById($idProducto);
            $productoItem =$producto->getProductoItem()->getFirst();
            
            $pedidoProductoItem = new pedidoProductoItem();
            $pedidoProductoItem->setIdProductoItem( $productoItem->getIdProductoItem() );
            $pedidoProductoItem->setIdPedido( $pedido->getIdPedido() );
            $pedidoProductoItem->setIdProductoTalle( $productoItem->getIdProductoTalle() );
            $pedidoProductoItem->setIdProductoColor( $productoItem->getIdProductoColor() );
            $pedidoProductoItem->setCantidad( $cantidad );
            $pedidoProductoItem->setPrecioLista( $producto->getPrecioLista() );
            $pedidoProductoItem->setPrecioDeluxe( $producto->getPrecioDeluxe() );
            $pedidoProductoItem->setCosto( $producto->getCosto() );
            $pedidoProductoItem->setOrigen( $producto::ORIGEN_STOCK_PERMANENTE );
            $pedidoProductoItem->save();
            
            for ( $i = 0 ; $i < $cantidad ; $i++ )
            {
                $fallado = new fallado();
                $fallado->setIdPedidoProductoItem( $pedidoProductoItem->getIdPedidoProductoItem() );
                $fallado->setRecuperado(false);
                $fallado->save();
            }
        }
        
    }

    public function down()
    {

    }
}