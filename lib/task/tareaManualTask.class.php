<?php

class tareaManualTask extends deluxebuysBaseTask
{
  
  protected function configure()
  {
    parent::preConfigure();
    
    $this->name             = 'tarea-manual';
    $this->briefDescription = 'Es una tarea general para ejecutar procesos manuales no periodicos';
    $this->detailedDescription = <<<EOF
La tarea [tarea-manual|INFO] es una tarea general para ejecutar procesos manuales no periodicos
Call it with: [php symfony deluxebuys:tarea-manual|INFO]
EOF;
  }

  public function doExecute($arguments = array(), $options = array())
  {

$ids = array(63489,63512,63518,64001,64002,64003,64004,64005,64006,64008,64009,64014,64016,64020,64021,64022,64023,64024,64025,64026,64027,64028,64029,64030,64031,64032,64033,64034,64035,64038,64039,64040,64041,68893,68901,68907,68909,68911,68912,68914,68916,68918,68919,68925,68926,68932,68934,68936,68937,68938,68940,68941,68943,68944,68948,68949,68951,68977,68978,68979,68980,68982,68983,68985,68986,68987,68988,68990,68991,68993,68994,68997,68999,69002,69003,69004,69005,69006,69007,69008,69009,69010,69011,69012,69013,69014,69016,69018,69088,69089,69090,69091,69092,69093,69094,69095,69096,69097,69098,69099,69100,69101,69102,69108,69109,69112,69113,69114,69116,69117,69123,69124,69125,69128,69129,73905,73906,73908,73910,73911,73912,73913,73915,73916,73917,73919,73920,73927,73930,73934,73936,73937,73939,73940,73941,73943,73945,73946,73947,73948,73949,73952,73954,74146,74147,74149,74150,74151,74152,74154,74155,74156,74157,74158,74160,74161,74163,74164,74165,74166,74169,74170,74171,74172,74173,74174,74176,74177,74178,74179,74180,74181,74182,74183,74184,74185,74186,74187,74188,74189,74191,74192,74193,74194,74195,74197,74198,74199,74200,74203,74204,74205,74208,74209,74210,74211,74212,74216,74217,74218,74219,74220,74221,74222,74223,74224,74225,74226,74227,74228,74476,74477,74478,74759,74760,74761,74762,74763,74764,74765,74766,74767,74768,74770,74772,74773,74774,74775,74776,74777,74778,74900,74901,74904,74905,74907,74908,74909,74910,74911,74912,74913,74914,74968,75578,75579,75580,75581,75582,75583,75584,75585,75586,75588,75589,75590,75591,75592,75593,75594,75595,75596,75597,75598,75599,75600,75601,75602,75603,75604,75605,75606,75607,75608,75609,75610,75611,75612,75613,75614,75615,75617,75618,75619,75620,75621,75622,75623,75624,75625,75626,75627,75628,75629,75630,75631,75632,75633,75634,75635,75636,75637,75638,75639,75640,75641,75642,75643,75644,75645,75646,75647,75648,75649,75651,75652,75653,75654,75655,75656,75657,75658,75659,75660,75661,75662,75663,75664);

    $productoItems = productoItemTable::getInstance()->listByIdsProductoItem($ids);
    foreach ($productoItems as $productoItem) {
      $productoItem->updateStock();
    }



exit;


    $ids = array(279462);
	
    $pedidos = pedidoTable::getInstance()->listByIds($ids);

	$c = count($pedidos);
    foreach ($pedidos as $pedido) {
      $pedido->updateEnvioDetalle();
      $pedido->save();
    
var_dump($c--);
}
    
    exit;
    

    /*
    $productoItems = productoItemTable::getInstance()->listByIdsProductoItem($ids);
    foreach ($productoItems as $productoItem) {
      $productoItem->updateStock();
    }
    */


    $ids = array(9964,10986,10987,10998,11004,12199,14064,14081,14218,14219,16609,16613,16614,16617,19956,19961,19983,19987,19998,19999,20286,20291,20292,20293,20299,20301,20307,21002,22422,22428,22430,22442,22536,22569,22573,24051,24080,24086,24631,26177,26178,26179,26181,26183,26184,26185,26186,26192,26203,26215,27237,28041,28042,28043,28045,28046,28056,28072,28073,28081,28082,28087,28101,28102,28103,28110,28111,28112,28113,28118,28120,28124,31008,31011,31017,31020,31021,31033,31263,31267,31268,31269,31271,31272,31499,31508,31518,31519,31673,31679,33033,33098,33359,33365,33773,33776,33777,33778,33783,33788,33792,33793,33794,33795,33796,33797,33798,33799,33800,33802,33804,33807,33808,34767,34778,35591,35592,36256,36278,36279,36280,37422,37423,37424,37425,37426,37427,37428,37429,37430,37431,37432,37433,37434,37435,37436,37437,37438,37439,37440,37441,37442,37443,37444,37445,37446,37447,37448,37450,37451,37453,37454,37514,37530,37893,38266,38267,38269,38272,38284,38285,38288,38295,38297,38298,38299,38300,38301,38302,38304,38307,38312,38315,38316,38317,38318,38319,38320,38321,38322,38323,38325,38330,38333,38334,38335,38336,38345,38491,38492,38493,38494,38495,38497,38498,38499,38502,38506,38507,39325,39326,39327,39328,39329,39330,39331,39332,39333,39334,39335,39336,39337,39338,39339,39340,39341,39342,39343,39344,39345,39346,39347,39348,40252,40255,40256,40257,40260,40261,40263,40268,40269,40271,40274,40275,40285,40288,40365,40366,40367,40368,40373,40374,40388,40395,40469,40483,40485,40486,40489,40523,40524,40528,40533,40535,40538,40686,40687,40688,40690,40691,40696,41061,41062,41063,41064,41065,41066,41067,41068,41069,41070,41071,41072,41073,41074,41075,41076,41077,41078,41079,41080,41081,41082,41083,41084,41641,41645,41647,41651,41659,41671,41674,41690,41691,41692,41693,41696,41697,41704,41705,41709,41714,41902,41913,41916,41917,41918,41919,41922,41924,41929,41930,41931,41938,42034,42038,42039,42040,42042,42043,42044,42047,42049,42050,42051,42053,42055,42056,42062,42064,42361,42362,42364,42366,42368,42370,42374,42377,42378,42379,42397,42398,42405,42406,42407,42475,42476,42478,42695,42696,42697,42703,42711,42712,42714,42715,42716,42717,42721,42722,42723,42724,42726,43654,43655,43657,43658,43662,43665,43666,43667,43669,43671,43675,43676,43677,43679,43680,43681,43683,43684,43685,43697,43698,43699,43700,43704,43705,43706,43707,43714,43721,43723,43724,43726,43739,43740,43741,43742,43743,43745,43746,43747,43748,43751,43752,43753,43754,43755,43757,43758,43759,43760,43761,43762,43763,43764,43765,43766,43767,43768,43769,43770,43771,43772,43773,43774,43789,43794,43862,43863,43864,43868,43869,43870,43875,43880,43881,43884,43885,43886,43890,43995,43996,43997,43998,43999,44000,44001,44002,44003,44004,44005,44006,44007,44008,44009,44010,44011,44012,44013,44014,44015,44016,44201,44202,44208,44526,44531,44533,44534,44540,44541,44543,44547,44550,44555,44558,44559,44562,44564,44565,44567,44568,44576,44582,44583,44584,44585,44586,44587,44588,44590,44591,44592,44593,44594,44725,44726,45127,45144,45365,45366,45367,45368,45369,45370,45371,45372,45373,45374,45375,45376,45377,45378,45379,45380,45381,45382,45383,45384,45385,45388,45389,45390,45391,45392,45393,45394,45395,45396,45397,46014,46016,46017,46018,46022,46023,46026,46027,46028,46029,46030,46031,46032,46033,46034,46035,46037,46268,46270,46271,46272,46273,46275,46278,46280,46281,46331,46332,46333,46644,46666,46667,46670,46727,46728,46734,46919,46932,46935,46945,46973,47057,47061,47062,47096,47116,47121,47122,47152,47153,47158,47159,47160,47162,47163,47165,47166,47167,47168,47169,47170,47172,47176,47179,47180,47181,47182,47183,47184,47185,47186,47190,47191,47192,47195,47202,47206,47213,47214,47216,47218,47236,47241,47242,47243,47547,47549,47550,47551,47553,47554,47556,47558,47559,47560,47561,47563,47581,47582,47583,47588,47595,47596,47597,47603,47604,47609,47610,47611,47612,47615,47616,47620,47621,47622,47623,47624,47627,47628,47629,47631,47633,47634,47635,47636,47637,47641,48025,48026,48034,48035,48036,48038,48044,48049,48050,48051,48052,48053,48055,48056,48059,48060,48061,48062,48064,48066,48067,48068,48069,48070,48071,48076,48085,48122,48128,48230,48256,48259,48326,48329,48333,48336,48338,48933,48936,48937,48938,48939,48945,48946,48950,49992,49993,50243,50375,50385,50386,50390,50392,50396,50397,50398,50399,50400,50401,50402,50403,50404,50405,50406,50414,50415,50416,50417,50418,50421,50596,50597,50598,50599,50600,50601,50602,50603,50604,50605,50606,50607,50608,50609,50610,50611,50613,50614,50615,50616,50617,50618,50619,50620,50621,50622,50623,50625,50626,50627,50628,50629,50633,50634,50637,50645,50646,50647,50648,50650,50651,50657,50658,50660,50667,50672,50673,50681,50685,50686,50691,50694,50695,50696,50697,50698,50702,50703,50704,50705,50707,50708,50709,50714,50715,50720,50735,50736,50738,50740,50748,50754,50756,50758,50761,50762,50763,50909,50911,50917,50918,50919,50921,50922,50923,50926,51663,51664,51665,51765,51946,51947,51948,51949,51950,51951,51952,51953,51954,51955,51956,51957,51958,51959,51960,51961,51962,51963,51964,51965,52061,52086,52088,52089,52218,52266,52274,52299,52382,52427,52428,52429,52430,52988,53040,53041,53042,53043,53046,53047,53049,53050,53051,53052,53053,53055,53056,53057,53058,53059,53060,53061,53062,53063,53064,53065,53066,53067,53068,53069,53071,53072,53073,53074,53075,53077,53080,53081,53082,53083,53086,53087,53114,53684,53687,53688,53689,53690,53691,53692,53693,53695,53696,53699,53701,53702,53703,53704,53708,53712,53713,53714,53717,53718,53719,53720,53724,53774,53777,53778,53780,53781,53782,53783,53785,53860,53876,53883,53884,53888,53894,53911,53912,53914,54365,54366,54367,54384,54389,54391,54393,54396,54398,54399,54400,54402,54406,54407,54411,54412,54413,54414,54415,54419,54422,54431,54439,54442,54443,54450,54452,54453,54454,54457,54465,54469,54471,54472,54479,54486,54488,54489,54491,54492,54494,54495,54496,54497,54498,54499,54500,54503,54520,54521,54522,54555,54557,54558,54562,54563,54564,54572,54586,54589,54590,54591,54603,54607,54611,54612,54683,54684,54831,54832,55057,55062,55063,55067,55094,55095,55101,55103,55104,55105,55624,55685,55686,55687,55689,55691,55694,55695,55696,55698,55699,55700,55701,55702,55703,55704,55705,55706,55803,55804,55805,55806,55807,55812,55815,55818,55820,55821,55823,55828,55832,55833,56215,56216,56220,56221,56222,56223,56224,56226,56302,56304,56305,56306,56307,56308,56309,56314,56315,56318,56319,56320,56321,56322,56323,56324,56325,56326,56327,56336,56337,56338,56339,56380,56381,56382,56384,56389,56422,56423,56456,56458,56465,56466,56468,56470,56471,56473,56474,56475,56476,56477,56484,56490,56545,56557,56628,56629,56631,56640,56644,56645,56646,56647,56648,56649,56652,56662,56668,56671,56673,56674,56675,56678,56679,56682,56683,56687,56688,56690,56986,56987,56988,56989,56990,56991,56992,56993,56994,56995,56996,56997,56998,56999,57000,57001,57002,57003,57004,57005,57006,57007,57008,57009,57010,57011,57012,57013,57014,57015,57016,57017,57018,57019,57020,57021,57022,57023,57024,57025,57026,57027,57029,57030,57031,57032,57033,57034,57035,57036,57037,57038,57039,57040,57119,57121,57127,57128,57136,57137,57143,57144,57147,57148,57149,57150,57154,57155,57164,57165,57354,57355,57357,57358,57361,57362,57368,57382,57863,57864,57865,57866,57867,57868,57869,57870,57871,57872,57873,57874,57875,57876,57877,57878,57879,57880,57881,57882,57883,57884,57885,57886,57887,57888,57889,57890,57891,57892,57893,57894,57895,57896,57897,57898,57899,57900,57901,57902,57903,57904,57905,57906,57907,57908,57909,57950,57951,57952,57953,57954,57955,57956,57957,57958,58865,58866,58867,59275,59276,59277,59278,59279,59280,59282,59284,59285,59286,59287,59288,59289,59290,59291,59292,59293,59295,59297,59298,59299,59300,59302,59303,59305,59306,59307,59308,59309,59311,59312,59313,59314,59315,59316,59317,59318,59319,59320,59321,59322,59323,59324,59325,59326,59328,59329,59330,59331,59333,59334,59335,59336,59337,59338,59340,59341,59342,59343,59344,59345,59346,59347,59348,59349,59351,59436,59455,59456,59459,59463,59466,59468,59469,59470,59471,59473,59476,59477,59480,59481,59484,59485,59493,59494,59496,59606,59608,59609,59610,59611,59612,59613,59614,59617,59626,59627,59630,59631,59632,59633,59634,59635,59638,59645,59832,59834,59957,59958,59959,59960,59961,59962,59963,59964,59966,59967,59968,59969,59970,59974,59975,59978,59980,59981,59982,59983,59984,60339,60340,60341,60342,60343,60344,60345,60346,60347,60348,60349,60350,60351,60352,60353,60354,60355,60356,60357,60358,60359,60360,60361,60362,60363,60364,60365,60366,60367,60368,60369,60370,60371,60372,60373,60374,60375,60376,60377,60378,60379,60380,60381,60382,60383,60384,60385,60386,60387,60388,60389,60390,60391,60392,60393,60394,60395,60396,60531,60532,60533,60534,60535,60536,60537,60538,60539,60540,60541,60544,60545,60546,60655,60656,60657,60658,60659,60660,60661,60662,60663,60665,60666,60667,60668,60669,60670,60671,60672,60673,60674,60675,60676,60677,60678,60679,60680,60681,60682,60683,60684,60685,60686,60687,60688,60689,60690,60691,60692,60693,60694,60695,60696,60697,60698,60699,60700,60701,60702,60703,60704,60705,60706,60707,60708,60709,60818,60819,60820,60821,60822,60823,60824,60825,60826,60827,60828,60829,60830,60831,60832,60833,60834,60835,60836,60837,60838,60839,60840,60841,60842,60843,60844,60845,60846,60847,60848,60849,60850,60851,60852,60853,60854,60855,60856,60857,60858,60859,60860,60861,60862,60863,60864,60865,60866,60867,60868,60869,60870,60871,60872,60873,60874,60875,60876,60877,60878,60879,60880,60881,60882,60883,60884,60885,60886,60887,60888,60889,60890,60891,60892,60893,60894,60895,60896,60897,60898,60899,60900,60901,60902,60903,60904,60905,60906,60907,60908,60909,60910,60911,60912,60913,60914,60915,60916,60917,60918,60919,60920,60921,60954,60955,60956,60957,60958,60959,60960,60961,60962,60963,60964,60965,60966,60968,60969,60970,60971,60972,60973,60974,60975,60976,60977,60979,60980,60982,60983,60984,60985,60986,60987,61033,61034,61035,61036,61037,61038,61039,61040,61041,61042,61043,61044,61045,61046,61047,61048,61049,61050,61051,61052,61053,61054,61055,61056,61057,61058,61059,61060,61061,61062,61063,61064,61065,61066,61067,61068,61069,61070,61071,61072,61073,61074,61075,61485,61486,61489,61490,61491,61492,61494,61495,61496,61497,61498,61499,61501,61502,61503,61504,61505,61506,61508,61509,61511,61512,61513,61514,61515,61516,61520,61521,61522,61525,61526,61527,61528,61529,61530,61531,61532,61534,61535,61780,61781,61785,61786,61789,61790,61792,61793,61794,61796,61797,61802,61803,61807,61808,61809,61815,61816,61817,61821,62050,62146,62147,62148,62149,62150,62151,62152,62153,62154,62155,62156,62157,62158,62159,62160,62161,62162,62163,62164,62165,62166,62167,62168,62169,62170,62171,62172,62173,62174,62175,62176,62177,62178,62179,62180,62181,62182,62183,62184,62185,62186,62187,62260,62261,62266,62269,62792,62794,62798,62799,62800,62801,62802,62805,62929,62931,62932,62933,62934,62935,62936,62937,62940,62941,62946,62947,62948,62949,62950,62951,62952,62955,62956,62957,62962,62964,62966,62969,62970,62972,62973,62975,62977,62981,62982,62985,62987,62991,62994,62997,62998,62999,63003,63005,63008,63012,63013,63016,63020,63024,63025,63026,63029,63030,63036,63039,63054,63055,63058,63061,63063,63066,63067,63070,63071,63072,63080,63086,63088,63094,63254,63255,63256,63257,63258,63259,63260,63261,63262,63296,63297,63311,63312,63672,63673,63674,63675,63676,63677,63681,63687,63688,63689,63690,63693,63694,63695,63696,63697,63698,63699,63700,63701,63718,63719,63720,63721,63722,63723,63724,63725,63726,63727,63728,63729,63853,63854,63855,63856,63857,63858,63859,63860,64050,64053,64054,64131,64135,64137,64138,64140,64145,64153,64157,64160,64162,64166,64406,64422,64480,64540,64574,64575,64595,64597,64598,64599,64601,64602,64603,64604,64605,64606,64607,64809,64810,64812,64834,64906,64910,64928,64929,64930,64931,64932,64933,64934,65004,65005,65006,65007,65008,65009,65010,65011,65012,65013,65014,65015,65016,65017,65018,65019,65021,65022,65023,65024,65025,65026,65027,65028,65030,65031,65032,65033,65034,65035,65038,65039,65040,65041,65042,65043,65044,65045,65046,65047,65048,65050,65052,65053,65055,65056,65057,65058,65059,65060,65061,65062,65063,65064,65066,65067,65068,65069,65070,65071,65072,65073,65074,65075,65076,65077,65078,65080,65081,65082,65083,65084,65085,65086,65087,65088,65089,65090,65091,65092,65093,65094,65096,65097,65098,65099,65100,65101,65102,65104,65105,65106,65107,65108,65109,65110,65112,65113,65114,65116,65118,65119,65120,65121,65122,65123,65124,65125,65126,65127,65128,65129,65130,65131,65132,65133,65134,65135,65136,65137,65138,65139,65142,65143,65144,65145,65146,65147,65148,65149,65150,65151,65152,65153,65154,65155,65156,65157,65158,65159,65160,65161,65162,65163,65164,65165,65166,65167,65168,65169,65170,65171,65172,65173,65174,65175,65176,65177,65178,65180,65181,65182,65183,65184,65185,65186,65187,65189,65190,65191,65192,65193,65194,65196,65197,65198,65199,65200,65201,65203,65204,65205,65206,65208,65209,65210,65211,65212,65213,65214,65215,65216,65217,65218,65220,65221,65222,65223,65224,65225,65226,65227,65228,65229,65230,65231,65232,65233,65234,65235,65236,65239,65241,65242,65243,65244,65245,65246,65746,65758,65759,65765,65766,65767,65768,66114,66251,66252,66253,66261,66262,66266,66267,66268,66269,66271,66272,66273,66274,66316,66318,66319,66320,66374,66375,66376,66377,66378,66379,66380,66381,66382,66383,66384,66385,66386,66387,66388,66389,66390,66391,66392,66393,66394,66395,66396,66397,66398,66399,66400,66401,66402,66403,66404,66405,66406,66407,66408,66409,66410,66411,66412,66413,66414,66415,66416,66417,66418,66781,66782,66783,66784,66785,66786,66787,66788,66789,66790,66791,66792,66793,66794,66795,66796,66797,66798,66799,66800,66802,66803,66804,66805,66806,66807,66808,66809,66810,66811,66812,66813,66814,66815,66816,66817,66850,66854,66855,66860,66863,66865,67264,67265,67266,67267,67268,67269,67270,67271,67272,67273,67274,67275,67276,67277,67499,67500,67501,67502,67503,67504,67505,67506,67507,67508,67509,67510,67511,67512,67513,67514,67515,67516,67517,67518,67519,67520,67521,67522,67523,67524,67525,67526,67527,67528,67529,67530,67531,67532,67533,67534,67535,67536,67537,67538,67539,67540,67541,67542,67543,67544,67692,67693,67698,67699,67700,67701,67702,67703,67704,67705,67706,67707,67708,67709,67710,67711,67712,67713,67714,67715,67716,67717,67718,67719,67720,67721,67722,67723,67724,67725,67726,67727,67728,67729,67730,67731,67732,67733,67734,67735,67736,67737,67738,67739,67740,67741,67742,67743,67744,67745,67746,67747,67748,67749,67750,67751,67752,67753,67754,67755,67756,67757,68000,68001,68002,68003,68006,68007,68010,68012,68013,68014,68015,68019,68020,68021,68023,68027,68028,68030,68064,68065,68066,68067,68068,68069,68070,68071,68072,68073,68074,68075,68076,68077,68078,68079,68080,68081,68082,68083,68084,68085,68086,68087,68088,68089,68090,68091,68092,68093,68094,68095,68096,68097,68098,68099,68100,68101,68102,68103,68104,68105,68106,68107,68108,68109,68110,68111,68112,68113,68114,68115,68116,68117,68119,68120,68121,68122,68123,68124,68125,68126,68127,68128,68129,68130,68131,68132,68217,68218,68219,68220,68221,68222,68223,68224,68225,68226,68227,68228,68342,68343,68344,68345,68346,68347,68348,68349,68350,68351,68352,68353,68354,68357,68358,68359,68360,68361,68362,68363,68364,68365,68366,68367,68368,68369,68512,68513,68514,68515,68516,68517,68518,68519,68520,68521,68522,68523,68524,68525,68526,68527,68528,68529,68530,68531,68532,68533,68534,68535,68536,68537,68538,68539,68540,68541,68542,68543,68544,68545,68547,68642,68644,68646,68845,68846,68847,69033,69035,69038,69039,69040,69041,69042,69043,69049,69052,69053,69055,69061,69062,69064,69065,69067,69068,69069,69071,69072,69075,69076,69077,69078,69079,69082,69084,69087,69395,69396,69397,69398,69399,69400,69401,69637,69642,69947,69948,69949,69950,69951,69952,69953,69954,69955,69956,69957,69958,69959,69960,69961,70194,70195,70196,70197,70198,70199,70200,70201,70202,70203,70204,70205,70206,70207,70208,70209,70210,71127,71128,71129,71130,71131,71132,71133,71134,71136,71137,71138,71139,71198,71199,71200,71201,71202,71203,71204,71205,71206,71207,71208,71209,71210,71211,71212,71213,71214,71215,71216,71217,71218,71219,71220,71221,71222,71223,71224,71225,71226,71227,71228,71229,71230,71231,71232,71233,71234,71235,71236,71237,71238,71239,71240,71278,71279,71280,71281,71282,71283,71284,71286,71287,71288,71289,71290,71291,71292,71294,71295,71296,71297,71298,71299,71300,71301,71302,71303,71307,71723,71724,71725,71726,71727,71728,71729,71730,71731,71732,71733,71734,71735,71736,71737,71738,71739,71740,71741,71742,71743,71744,71745,71746,71747,71748,71749,71750,71761,71762,71763,71764,71765,71766,71767,71768,71769,71770,71771,71772,71773,71774,71775,71776,71777,71778,71779,71780,71781,71782,71783,71784,71785,71786,71787,71788,71789,71790,71826,71827,71828,71829,71830,71831,71922,72008,72009,72010,72011,72012,72013,72014,72015,72016,72017,72018,72019,72020,72021,72022,72023,72024,72025,72026,72027,72028,72029,72030,72031,72032,72033,72034,72035,72036,72037,72038,72039,72040,72041,72042,72043,72044,72045,72046,72047,72048,72049,72050,72051,72052,72053,72054,72055,72056,72057,72058,72059,72060,72061,72062,72063,72064,72065,72066,72067,72068,72069,72070,72071,72072,72402,72403,72404,72405,72406,72407,72408,72409,72410,72411,72412,72413,72414,72415,72416,72417,72418,72419,72420,72421,72422,72423,72424,72425,72426,72427,72428,72429,72430,72431,72432,72433,72434,72435,72436,72437,72438,72439,72440,72441,72442,72443,72444,72445,72446,72447,72448,72449,72450,72451,72452,72453,72454,72455,72456,72457,72458,72685,72686,72687,72688,72689,72690,72691,72692,72693,72694,72695,72696,72697,72698,72699,72700,72701,72702,72703,72704,72705,72706,72707,72708,72709,72710,72711,72712,72713,72714,72715,72716,72717,72718,72719,72720,72721,72722,72723,72724,72725,72726,72727,72728,72729,72730,72731,72732,72733,72734,72735,72736,72737,72738,72739,72740,72741,72742,72743,72744,72745,72746,72747,72748,72749,72787,72788,72789,72790,72791,72792,72793,72794,72795,72796,72797,72798,72799,72800,72801,72802,72803,72804,72805,72806,72807,72808,72809,72810,72811,72812,72813,72814,72815,72816,72817,72818,72819,72820,72821,72822,72823,72824,72825,72826,72827,72828,72829,72830,72831,72832,72833,72834,72835,72836,72837,72838,72839,72840,72841,72842,72843,72844,72845,72847,72848,72849,72850,72851,72852,72853,72854,72855,72856,72857,72858,72859,72860,72861,72862,72863,72864,72865,72866,72867,72868,72869,72870,72871,72872,72873,72874,72875,72876,72877,72878,72879,72880,72881,72882,72883,72884,72885,72886,72887,72888,72889,72890,72891,72892,72893,72894,72895,72896,72897,72898,72899,72900,72901,72902,72903,72904,72905,72906,72907,72908,72909,72910,72911,72912,72913,72914,73191,73260,73261,73262,73263,73264,73265,73266,73267,73268,73269,73270,73271,73272,73273,73274,73275,73276,73277,73278,73279,73280,73281,73282,73283,73284,73285,73286,73287,73288,73289,73290,73291,73292,73293,73294,73295,73296,73297,73298,73299,73300,73301,73302,73303,73304,73305,73421,73422,73423,73424,73425,73426,73427,73428,73429,73430,73431,73432,73433,73434,73435,73436,73437,73438,73439,73440,73441,73442,73443,73444,73445,73446,73447,73448,73449,73450,73451,73452,73453,73454,73455,73456,73457,73458,73459,73460,73461,73462,73463,73464,73465,73466,73467,73469,73470,73471,73472,73473,73474,73475,73476,73477,73478,73479,73480,73481,73482,73483,73484,73485,73486,73488,73489,73490,73491,73492,73493,73494,73495,73496,73497,73498,73499,73500,73501,73502,73503,73504,73505,73506,73507,73508,73509,73510,73511,73512,73513,73514,73515,73516,73517,73518,73519,73520,73521,73522,73523,73524,73525,73526,73527,73528,73529,73530,73531,73532,73533,73534,73535,73536,73537,73538,73539,73540,73541,73542,73543,73544,73545,73546,73547,73548,73549,73550,73551,73552,73553,73554,73555,73556,73557,73558,73559,73560,73561,73562,73563,73564,73565,73566,73567,73568,73569,73570,73571,73572,73573,73574,73575,73576,73577,73578,73579,73580,73581,73582,73583,73584,73585,73586,73587,73588,73589,73590,73591,73592,73593,73594,73595,73596,73597,73598,73599,73600,73955,73956,73957,73958,73959,73960,73961,73962,73963,73964,73965,73966,73967,73968,73969,73970,73971,73972,73973,73974,73975,73976,73977,73978,73979,73980,73981,73982,73983,73984,73985,73986,73987,73988,73989,73990,73991,73992);

    $this->eliminarProductos(3099, $ids);
    $this->agregarProductos(3100, $ids);

  }


  public function agregarProductos($idCampana, $idsProductos)
  {
    $campana = campanaTable::getInstance()->getById( $idCampana );

    $c = count($idsProductos);
    foreach ($idsProductos as $idProducto)
    {     
      $productoCampana = new productoCampana();
      $productoCampana->setIdCampana($campana->getIdCampana());
      $productoCampana->setIdProducto($idProducto);
      $productoCampana->save();
      
      productoLogTable::getInstance()->generate($idProducto, 'Se asigna a la Campaña #' . $campana->getIdCampana() . ' manualmente desde la edicion de la campaña.');
      $c--;
      var_dump($c);
    }

    $campana->actualizarTextoPromocion();
  }

  public function eliminarProductos($idCampana, $idsProductos)
  {
    $campana = campanaTable::getInstance()->getById( $idCampana );
    
    if ( count( $idsProductos ) ) 
    {
        $productoCampana = productoCampanaTable::getInstance()->delete($campana->getIdCampana(), $idsProductos);
    }

  $c = count($idsProductos);
    foreach ($idsProductos as $idProducto)
      {       
        productoLogTable::getInstance()->generate($idProducto, 'Se quita de la Campaña #' . $campana->getIdCampana() . ' manualmente desde la edicion de la campaña.');

        /*
         * Se guarda el pedido nuevamente para ejecutar el trigger postSave, que actualiza el precio_deluxe, segun
         * el origen del producto (Oferta, Stock Permanente o Outlet)
         * */
        $producto = productoTable::getInstance()->getById($idProducto);
        
        $producto->doNotPostActions( array(
            producto::POST_ACTION_CERRAR_PUBLICACION_ML
        ));
        
        $producto->save();
    $c--;
    var_dump($c);
      }

    $campana->actualizarTextoPromocion();
  }

}
